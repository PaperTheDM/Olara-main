<!doctype html>
<html lang="en">
  <head>
    <!--Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!--Font Source-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">

    <!--Custom styles-->
    <link rel="stylesheet" href="css/stylesUniv.css">
    <title>Point Buy Calculator</title>
  </head>
  <body>
    <h1>Olara</h1>

    <div id="nav-placeholder"></div>
    
<main id="wrapper">
    <div class="container">
		<div class="row">
			<div class="bg col-12">
                <a href="tools.html" class="display" style="text-decoration: underline;">Return</a>
            </div>
        </div>
        <div class="jumbotron stinger" style="background-color: mediumslateblue; background-size: contain;">
            <div class="row" style="background-color:rgba(255, 255, 255, 0.8);">
                <h2 class="bg col-12 center" style="background-color:rgba(255, 255, 255, 0);">Point Buy Calculator</h2> <br>
            </div>
        </div>
    <div class="center">
            <div id="total-points">Total Points: <span id="points">27</span></div>
            <table class="center calcTable">
                <thead>
                    <tr>
                        <th>Ability Score</th>
                        <th>Points</th>
                        <th>Modifier</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pointsTable">Strength</td>
                        <td class="pointsTable"><input type="number" id="str" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="str-mod">-1</td>
                    </tr>
                    <tr>
                        <td class="pointsTable">Dexterity</td>
                        <td class="pointsTable"><input type="number" id="dex" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="dex-mod">-1</td>
                    </tr>
                    <tr>
                        <td class="pointsTable">Constitution</td>
                        <td class="pointsTable"><input type="number" id="con" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="con-mod">-1</td>
                    </tr>
                    <tr>
                        <td class="pointsTable">Intelligence</td>
                        <td class="pointsTable"><input type="number" id="int" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="int-mod">-1</td>
                    </tr>
                    <tr>
                        <td class="pointsTable">Wisdom</td>
                        <td class="pointsTable"><input type="number" id="wis" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="wis-mod">-1</td>
                    </tr>
                    <tr>
                        <td class="pointsTable">Charisma</td>
                        <td class="pointsTable"><input type="number" id="cha" value="8" min="8" max="15" onchange="updatePoints(this)"></td>
                        <td class="pointsTable" id="cha-mod">-1</td>
                    </tr>
                </tbody>
            </table>
        
            <script>
                function updatePoints(input) {
                    var totalPoints = 27;
                    var usedPoints = 0;
        
                    var abilityScores = {
                        "str": parseInt(document.getElementById("str").value),
                        "dex": parseInt(document.getElementById("dex").value),
                        "con": parseInt(document.getElementById("con").value),
                        "int": parseInt(document.getElementById("int").value),
                        "wis": parseInt(document.getElementById("wis").value),
                        "cha": parseInt(document.getElementById("cha").value)
                    };
        
                    for (var ability in abilityScores) {
                        var score = abilityScores[ability];
                        if (score < 8) {
                            alert("Ability scores cannot be lower than 8.");
                            input.value = 8;
                            score = 8;
                        }
                        if (score > 15) {
                            alert("Ability scores cannot be higher than 15.");
                            input.value = 15;
                            score = 15;
                        }
                        usedPoints += calculatePoints(score);
                    }
        
                    document.getElementById("points").textContent = totalPoints - usedPoints;
        
                    updateModifiers();
                }
        
                function calculatePoints(score) {
                    if (score <= 13) {
                        return score - 8;
                    } else {
                        return Math.pow(score - 14, 2) + 7;
                    }
                }
        
                function updateModifiers() {
                    var abilities = ["str", "dex", "con", "int", "wis", "cha"];
                    abilities.forEach(function(ability) {
                        var score = parseInt(document.getElementById(ability).value);
                        var modifier = Math.floor((score - 10) / 2);
                        document.getElementById(ability + "-mod").textContent = modifier;
                    });
                }
        
                updatePoints();
            </script>
    </div>
    </div>
</main>	

<div id="footer-placeholder"></div>


  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="footerFetcher.js"></script>
  <script src="fetch.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>